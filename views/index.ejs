<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" type="text/css"   href="/css/main.css">
    <title>Results</title>
  </head>
  <body>
    <div class="query-container">
      <h2>Query 1 Results</h2>
    <table>
      <thead>
        <tr>
          <th>User</th>
          <th>Time</th>
          <th>Minutes Picked</th>
          <th>Lines Picked</th>
          <th>Lines Picked Average</th>
        </tr>
      </thead>
      <tbody>
        <% results1.forEach((result) => { %>
          <tr>
            <td><%= result.logguser %></td>
            <td><%= result.time %></td>
            <td><%= result.Minutes_Picked %></td>
            <td><%= result.Lines_Picked %></td>
            <td><%= result.lines_picked_avg %></td>
          </tr>
        <% }); %>
      </tbody>
    </table>
    </div>

    <div class="query-container">
      <h2>Query 2 Results</h2>
      <canvas id="query2-pie-chart"></canvas>
    </div>
  </body>
  <script>
    const results2 = <%- JSON.stringify(results2) %>;
    const labels = results2.map(result => result.logguser);
    const data = results2.map(result => result.lines_picked);
  
    const ctx = document.getElementById('query2-pie-chart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: labels,
        datasets: [{
          data: data,
          backgroundColor: [
            // Add as many colors as you need for the chart segments
            'rgba(255, 99, 132, 0.7)',
            'rgba(54, 162, 235, 0.7)',
            'rgba(255, 206, 86, 0.7)',
            'rgba(75, 192, 192, 0.7)',
            'rgba(153, 102, 255, 0.7)',
            'rgba(255, 159, 64, 0.7)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false
      }
    });
  </script>
</html>